{"ast":null,"code":"import _regeneratorRuntime from\"D:/heynode/COVID19-Tracker-master/node_modules/@babel/runtime/regenerator\";import _slicedToArray from\"D:/heynode/COVID19-Tracker-master/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _asyncToGenerator from\"D:/heynode/COVID19-Tracker-master/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"D:/heynode/COVID19-Tracker-master/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"D:/heynode/COVID19-Tracker-master/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"D:/heynode/COVID19-Tracker-master/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"D:/heynode/COVID19-Tracker-master/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"D:/heynode/COVID19-Tracker-master/node_modules/@babel/runtime/helpers/esm/createSuper\";import{faBell,faBellSlash,faSyncAlt}from\"@fortawesome/free-solid-svg-icons\";import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import{withStyles}from\"@material-ui/styles\";import axios from\"axios\";import{formatDistance}from\"date-fns\";import React,{Component}from\"react\";import Lottie from\"react-lottie\";import*as animationData from\"../assets/loading.json\";import colors from\"../constants/colors\";import stateCodes from\"../constants/stateCodes\";import styles from\"../styles/CovidAppStyles\";import\"../styles/DarkModeButton.css\";import Barchart from\"./Barchart\";import Charts from\"./Charts\";import DisplayTable from\"./DisplayTable\";import Footer from\"./Footer\";import MapSection from\"./MapSection\";import Overview from\"./Overview\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var defaultOptions={loop:true,autoplay:true,animationData:animationData.default,rendererSettings:{preserveAspectRatio:\"xMidYMid slice\"}};var months={\"01\":\"Jan\",\"02\":\"Feb\",\"03\":\"Mar\",\"04\":\"Apr\",\"05\":\"May\",\"06\":\"Jun\",\"07\":\"Jul\",\"08\":\"Aug\",\"09\":\"Sep\",\"10\":\"Oct\",\"11\":\"Nov\",\"12\":\"Dec\"};var CovidApp=/*#__PURE__*/function(_Component){_inherits(CovidApp,_Component);var _super=_createSuper(CovidApp);function CovidApp(props){var _this;_classCallCheck(this,CovidApp);_this=_super.call(this,props);_this.state={data:[],todayData:{},isLoading:false,mapData:[],tableData:[]};_this.fetchData=_this.fetchData.bind(_assertThisInitialized(_this));_this.formatData=_this.formatData.bind(_assertThisInitialized(_this));_this.findId=_this.findId.bind(_assertThisInitialized(_this));_this.handleFormat=_this.handleFormat.bind(_assertThisInitialized(_this));_this.handleNotification=_this.handleNotification.bind(_assertThisInitialized(_this));return _this;}_createClass(CovidApp,[{key:\"componentDidMount\",value:function componentDidMount(){this.fetchData();}},{key:\"fetchData\",value:function(){var _fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this2=this;var countryData,districtLevel,stateChanges,updates;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:this.setState({isLoading:!this.state.isLoading});countryData=axios.get(\"https://api.covid19india.org/data.json\");districtLevel=axios.get(\"https://api.covid19india.org/v2/state_district_wise.json\");stateChanges=axios.get(\"https://api.covid19india.org/states_daily.json\");updates=axios.get(\"https://api.covid19india.org/updatelog/log.json\");axios.all([countryData,districtLevel,stateChanges,updates]).then(axios.spread(function(){for(var _len=arguments.length,responses=new Array(_len),_key=0;_key<_len;_key++){responses[_key]=arguments[_key];}var countryData=responses[0].data;var districtLevel=responses[1].data;var updates=responses[3].data;var _countryData$statewis=countryData.statewise.slice(0,1),_countryData$statewis2=_slicedToArray(_countryData$statewis,1),todayData=_countryData$statewis2[0];var casesTimeline=countryData.cases_time_series;var data=countryData.statewise.slice(1,-1);_this2.setState({data:data,todayData:todayData,casesTimeline:casesTimeline,districtLevel:districtLevel,updates:updates,expanded:false},_this2.handleFormat);}));case 6:case\"end\":return _context.stop();}}},_callee,this);}));function fetchData(){return _fetchData.apply(this,arguments);}return fetchData;}()},{key:\"formatData\",value:function formatData(data){var _this3=this;var formatedData=data.map(function(state,i){return{id:_this3.findId(state.state),state:state.state.replace(\" and \",\" & \"),value:state.confirmed};});return formatedData;}},{key:\"findId\",value:function findId(location){for(var _i=0,_Object$entries=Object.entries(stateCodes);_i<_Object$entries.length;_i++){var _Object$entries$_i=_slicedToArray(_Object$entries[_i],2),key=_Object$entries$_i[0],value=_Object$entries$_i[1];if(location===key){return value;}}}},{key:\"handleFormat\",value:function handleFormat(){var _this4=this;var newdata=this.formatData(this.state.data);setTimeout(function(){_this4.setState({isLoading:false});},1000);this.setState({mapData:newdata});}},{key:\"handleNotification\",value:function handleNotification(){this.setState({expanded:!this.state.expanded});}},{key:\"formatDate\",value:function formatDate(date){try{var day=date.slice(0,2);var month=date.slice(3,5);var time=date.slice(11);return\"\".concat(day,\" \").concat(months[month],\", \").concat(time.slice(0,5),\" IST\");}catch(err){}}},{key:\"render\",value:function render(){var _this$props=this.props,classes=_this$props.classes,setDarkMode=_this$props.setDarkMode,isDarkMode=_this$props.isDarkMode;var _this$state=this.state,mapData=_this$state.mapData,isLoading=_this$state.isLoading,data=_this$state.data,districtLevel=_this$state.districtLevel,expanded=_this$state.expanded,updates=_this$state.updates;if(isLoading){return/*#__PURE__*/_jsx(\"div\",{className:classes.loadingIcon,children:/*#__PURE__*/_jsx(Lottie,{options:defaultOptions,height:500,width:500})});}var displayUpdates;try{displayUpdates=updates.slice(-5).reverse().map(function(_ref,i){var update=_ref.update,timestamp=_ref.timestamp;update=update.replace(\"\\n\",\"<br/>\");return/*#__PURE__*/_jsxs(\"div\",{className:classes.updateBox,children:[/*#__PURE__*/_jsx(\"h5\",{className:classes.updateHeading,children:\"\".concat(formatDistance(new Date(timestamp*1000),new Date()),\" ago\")}),/*#__PURE__*/_jsx(\"h4\",{className:classes.updateText,dangerouslySetInnerHTML:{__html:update}})]},i);});}catch(err){}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.header,children:[/*#__PURE__*/_jsxs(\"h1\",{className:classes.heading,children:[/*#__PURE__*/_jsx(\"span\",{children:\"Covid-19\"}),\" India Trend\"]}),/*#__PURE__*/_jsx(\"div\",{className:classes.btnBox,children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faSyncAlt,className:classes.button,onClick:this.fetchData})}),/*#__PURE__*/_jsxs(\"div\",{className:classes.lastUpdatedTime,children:[\"Last Updated:\",\" \",this.formatDate(this.state.todayData.lastupdatedtime)]}),/*#__PURE__*/_jsx(\"div\",{className:classes.updates,children:expanded&&/*#__PURE__*/_jsx(\"div\",{className:classes.update,children:displayUpdates})})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Overview,{isDarkMode:isDarkMode,data:this.state.todayData,loadingStatus:this.loadingStatus})}),/*#__PURE__*/_jsxs(\"div\",{className:classes.content,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.contentArea,children:/*#__PURE__*/_jsx(\"div\",{className:classes.mapArea,children:/*#__PURE__*/_jsx(MapSection,{data:data,mapData:mapData,isDarkMode:isDarkMode})})}),/*#__PURE__*/_jsxs(\"div\",{className:classes.chartArea,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.chartRes,children:/*#__PURE__*/_jsx(Charts,{data:this.state.casesTimeline,isLoading:this.state.isLoading})}),/*#__PURE__*/_jsxs(\"div\",{className:classes.tinyChartArea,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.tinyChart,children:/*#__PURE__*/_jsxs(\"div\",{className:classes.tinych,style:{background:\"rgba(249, 52, 94,.1)\"},children:[/*#__PURE__*/_jsx(\"h3\",{style:{color:colors.red},children:\"confirmed\"}),/*#__PURE__*/_jsx(Barchart,{data:this.state.casesTimeline,isLoading:this.state.isLoading,dataKey:\"totalconfirmed\",stroke:colors.red})]})}),/*#__PURE__*/_jsx(\"div\",{className:classes.tinyChart,children:/*#__PURE__*/_jsxs(\"div\",{className:classes.tinych,style:{background:\"rgba(250, 100, 0,.1)\"},children:[/*#__PURE__*/_jsx(\"h3\",{style:{color:colors.orange},children:\"active\"}),/*#__PURE__*/_jsx(Barchart,{data:this.state.casesTimeline,isLoading:this.state.isLoading,dataKey:\"totalactive\",stroke:colors.orange})]})}),/*#__PURE__*/_jsx(\"div\",{className:classes.tinyChart,children:/*#__PURE__*/_jsxs(\"div\",{className:classes.tinych,style:{background:\"rgba(28, 177, 66,.1)\"},children:[/*#__PURE__*/_jsx(\"h3\",{style:{color:colors.green},children:\"Recovered\"}),/*#__PURE__*/_jsx(Barchart,{data:this.state.casesTimeline,isLoading:this.state.isLoading,dataKey:\"totalrecovered\",stroke:colors.green})]})}),/*#__PURE__*/_jsx(\"div\",{className:classes.tinyChart,children:/*#__PURE__*/_jsxs(\"div\",{className:classes.tinych,style:{background:\"rgba(98, 54, 255,.1)\"},children:[/*#__PURE__*/_jsx(\"h3\",{style:{color:colors.purple},children:\"Deceased\"}),/*#__PURE__*/_jsx(Barchart,{data:this.state.casesTimeline,isLoading:this.state.isLoading,dataKey:\"totaldeceased\",stroke:colors.purple})]})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.tableContainer})]}),/*#__PURE__*/_jsx(Footer,{})]});}}]);return CovidApp;}(Component);export default withStyles(styles)(CovidApp);","map":{"version":3,"sources":["D:/heynode/COVID19-Tracker-master/src/components/CovidApp.js"],"names":["faBell","faBellSlash","faSyncAlt","FontAwesomeIcon","withStyles","axios","formatDistance","React","Component","Lottie","animationData","colors","stateCodes","styles","Barchart","Charts","DisplayTable","Footer","MapSection","Overview","defaultOptions","loop","autoplay","default","rendererSettings","preserveAspectRatio","months","CovidApp","props","state","data","todayData","isLoading","mapData","tableData","fetchData","bind","formatData","findId","handleFormat","handleNotification","setState","countryData","get","districtLevel","stateChanges","updates","all","then","spread","responses","statewise","slice","casesTimeline","cases_time_series","expanded","formatedData","map","i","id","replace","value","confirmed","location","Object","entries","key","newdata","setTimeout","date","day","month","time","err","classes","setDarkMode","isDarkMode","loadingIcon","displayUpdates","reverse","update","timestamp","updateBox","updateHeading","Date","updateText","__html","header","heading","btnBox","button","lastUpdatedTime","formatDate","lastupdatedtime","loadingStatus","content","contentArea","mapArea","chartArea","chartRes","tinyChartArea","tinyChart","tinych","background","color","red","orange","green","purple","tableContainer"],"mappings":"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","sourcesContent":["import {\n  faBell,\n  faBellSlash,\n  faSyncAlt\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { withStyles } from \"@material-ui/styles\";\nimport axios from \"axios\";\nimport { formatDistance } from \"date-fns\";\nimport React, { Component } from \"react\";\nimport Lottie from \"react-lottie\";\nimport * as animationData from \"../assets/loading.json\";\nimport colors from \"../constants/colors\";\nimport stateCodes from \"../constants/stateCodes\";\nimport styles from \"../styles/CovidAppStyles\";\nimport \"../styles/DarkModeButton.css\";\nimport Barchart from \"./Barchart\";\nimport Charts from \"./Charts\";\nimport DisplayTable from \"./DisplayTable\";\nimport Footer from \"./Footer\";\nimport MapSection from \"./MapSection\";\nimport Overview from \"./Overview\";\n\nconst defaultOptions = {\n  loop: true,\n  autoplay: true,\n  animationData: animationData.default,\n  rendererSettings: {\n    preserveAspectRatio: \"xMidYMid slice\",\n  },\n};\n\nconst months = {\n  \"01\": \"Jan\",\n  \"02\": \"Feb\",\n  \"03\": \"Mar\",\n  \"04\": \"Apr\",\n  \"05\": \"May\",\n  \"06\": \"Jun\",\n  \"07\": \"Jul\",\n  \"08\": \"Aug\",\n  \"09\": \"Sep\",\n  \"10\": \"Oct\",\n  \"11\": \"Nov\",\n  \"12\": \"Dec\",\n};\n\nclass CovidApp extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      data: [],\n      todayData: {},\n      isLoading: false,\n      mapData: [],\n      tableData: [],\n    };\n\n    this.fetchData = this.fetchData.bind(this);\n    this.formatData = this.formatData.bind(this);\n    this.findId = this.findId.bind(this);\n    this.handleFormat = this.handleFormat.bind(this);\n    this.handleNotification = this.handleNotification.bind(this);\n  }\n\n  componentDidMount() {\n    this.fetchData();\n  }\n\n  async fetchData() {\n    this.setState({ isLoading: !this.state.isLoading });\n    const countryData = axios.get(\"https://api.covid19india.org/data.json\");\n    const districtLevel = axios.get(\n      \"https://api.covid19india.org/v2/state_district_wise.json\"\n    );\n    const stateChanges = axios.get(\n      \"https://api.covid19india.org/states_daily.json\"\n    );\n    const updates = axios.get(\n      \"https://api.covid19india.org/updatelog/log.json\"\n    );\n\n    axios.all([countryData, districtLevel, stateChanges, updates]).then(\n      axios.spread((...responses) => {\n        const countryData = responses[0].data;\n        const districtLevel = responses[1].data;\n        const updates = responses[3].data;\n\n        const [todayData] = countryData.statewise.slice(0, 1);\n        const casesTimeline = countryData.cases_time_series;\n\n        const data = countryData.statewise.slice(1, -1);\n\n        this.setState(\n          {\n            data: data,\n            todayData: todayData,\n            casesTimeline: casesTimeline,\n            districtLevel: districtLevel,\n            updates: updates,\n            expanded: false,\n          },\n          this.handleFormat\n        );\n      })\n    );\n  }\n\n  formatData(data) {\n    const formatedData = data.map((state, i) => {\n      return {\n        id: this.findId(state.state),\n        state: state.state.replace(\" and \", \" & \"),\n        value: state.confirmed,\n      };\n    });\n    return formatedData;\n  }\n\n  findId(location) {\n    for (let [key, value] of Object.entries(stateCodes)) {\n      if (location === key) {\n        return value;\n      }\n    }\n  }\n\n  handleFormat() {\n    const newdata = this.formatData(this.state.data);\n    setTimeout(() => {\n      this.setState({ isLoading: false });\n    }, 1000);\n    this.setState({ mapData: newdata });\n  }\n\n  handleNotification() {\n    this.setState({ expanded: !this.state.expanded });\n  }\n\n  formatDate(date) {\n    try {\n      const day = date.slice(0, 2);\n      const month = date.slice(3, 5);\n      const time = date.slice(11);\n      return `${day} ${months[month]}, ${time.slice(0, 5)} IST`;\n    } catch (err) { }\n  }\n\n  render() {\n    const { classes, setDarkMode, isDarkMode } = this.props;\n    const {\n      mapData,\n      isLoading,\n      data,\n      districtLevel,\n      expanded,\n      updates,\n    } = this.state;\n\n    if (isLoading) {\n      return (\n        <div className={classes.loadingIcon}>\n          <Lottie options={defaultOptions} height={500} width={500} />\n        </div>\n      );\n    }\n    let displayUpdates;\n    try {\n      displayUpdates = updates\n        .slice(-5)\n        .reverse()\n        .map(({ update, timestamp }, i) => {\n          update = update.replace(\"\\n\", \"<br/>\");\n          return (\n            <div className={classes.updateBox} key={i}>\n              <h5 className={classes.updateHeading}>\n                {`${formatDistance(\n                  new Date(timestamp * 1000),\n                  new Date()\n                )} ago`}\n              </h5>\n              <h4\n                className={classes.updateText}\n                dangerouslySetInnerHTML={{\n                  __html: update,\n                }}\n              ></h4>\n            </div>\n          );\n        });\n    } catch (err) { }\n\n    return (\n      <>\n        <div className={classes.header}>\n          <h1 className={classes.heading}>\n            <span>Covid-19</span> India Trend\n          </h1>\n          <div className={classes.btnBox}>\n            <FontAwesomeIcon\n              icon={faSyncAlt}\n              className={classes.button}\n              onClick={this.fetchData}\n            />\n          </div>\n          <div className={classes.lastUpdatedTime}>\n            Last Updated:{\" \"}\n            {this.formatDate(this.state.todayData.lastupdatedtime)}\n          </div>\n          <div className={classes.updates}>\n           \n            {expanded && <div className={classes.update}>{displayUpdates}</div>}\n          </div>\n        </div>\n        <div>\n          <Overview\n            isDarkMode={isDarkMode}\n            data={this.state.todayData}\n            loadingStatus={this.loadingStatus}\n          />\n        </div>\n        <div className={classes.content}>\n          <div className={classes.contentArea}>\n            <div className={classes.mapArea}>\n              <MapSection\n                data={data}\n                mapData={mapData}\n                isDarkMode={isDarkMode}\n              />\n            </div>\n          </div>\n          <div className={classes.chartArea}>\n            <div className={classes.chartRes}>\n              <Charts\n                data={this.state.casesTimeline}\n                isLoading={this.state.isLoading}\n              />\n            </div>\n            <div className={classes.tinyChartArea}>\n              <div className={classes.tinyChart}>\n                <div\n                  className={classes.tinych}\n                  style={{ background: \"rgba(249, 52, 94,.1)\" }}\n                >\n                  <h3 style={{ color: colors.red }}>confirmed</h3>\n                  <Barchart\n                    data={this.state.casesTimeline}\n                    isLoading={this.state.isLoading}\n                    dataKey=\"totalconfirmed\"\n                    stroke={colors.red}\n                  />\n                </div>\n              </div>\n              <div className={classes.tinyChart}>\n                <div\n                  className={classes.tinych}\n                  style={{ background: \"rgba(250, 100, 0,.1)\" }}\n                >\n                  <h3 style={{ color: colors.orange }}>active</h3>\n                  <Barchart\n                    data={this.state.casesTimeline}\n                    isLoading={this.state.isLoading}\n                    dataKey=\"totalactive\"\n                    stroke={colors.orange}\n                  />\n                </div>\n              </div>\n              <div className={classes.tinyChart}>\n                <div\n                  className={classes.tinych}\n                  style={{ background: \"rgba(28, 177, 66,.1)\" }}\n                >\n                  <h3 style={{ color: colors.green }}>Recovered</h3>\n                  <Barchart\n                    data={this.state.casesTimeline}\n                    isLoading={this.state.isLoading}\n                    dataKey=\"totalrecovered\"\n                    stroke={colors.green}\n                  />\n                </div>\n              </div>\n              <div className={classes.tinyChart}>\n                <div\n                  className={classes.tinych}\n                  style={{ background: \"rgba(98, 54, 255,.1)\" }}\n                >\n                  <h3 style={{ color: colors.purple }}>Deceased</h3>\n                  <Barchart\n                    data={this.state.casesTimeline}\n                    isLoading={this.state.isLoading}\n                    dataKey=\"totaldeceased\"\n                    stroke={colors.purple}\n                  />\n                </div>\n              </div>\n            </div>\n          </div>\n          <div className={classes.tableContainer}>\n            \n          \n          </div>\n        </div>\n        <Footer />\n      </>\n    );\n  }\n}\n\nexport default withStyles(styles)(CovidApp);\n"]},"metadata":{},"sourceType":"module"}